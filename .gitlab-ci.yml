image: golang:latest

stages:
  - test
  - build

unit tests:
  stage: test
  tags:
    - camelninja
  script:
    - go get -t -d ./...
    - go test ./...
  only:
    - dev
    - pushes
    - merge_requests

try to build:
  stage: build
  tags:
    - camelninja
  script:
    - go get -t -d ./...
    - go build -v ./...
  only:
    - dev
    - pushes
    - merge_requests